*go-shopify.Order {ID: 5725095264408, Name: "#3240", Email: "guest@connectpos.com", CreatedAt: *time.Time(2025-12-24T08:18:43Z){wall: 0, ext: 63902161123, loc: *(*time.Location)(0xc000922ee0)}, UpdatedAt: *time.Time(2025-12-24T08:18:49Z){wall: 0, ext: 63902161129, loc: *(*time.Location)(0xc000922ee0)}, CancelledAt: *time.Time nil, ClosedAt: *time.Time nil, ProcessedAt: *time.Time(2025-12-24T08:18:42Z){wall: 0, ext: 63902161122, loc: *(*time.Location)(0xc000922ee0)}, Customer: *git02.smartosc.com/production/go-shopify.CustomerOrder {ID: 5386593173656, Email: "guest@connectpos.com", FirstName: "Guest", LastName: "Customer", State: "disabled", Note: "", VerifiedEmail: true, MultipassIdentifier: "", TaxExempt: false, Phone: "", Tags: "ConnectPOS, group id:0", EmailMarketingConsent: *(*"git02.smartosc.com/production/go-shopify.EmailMarketingConsent")(0xc001a19440), DefaultAddress: *(*"git02.smartosc.com/production/go-shopify.CustomerAddress")(0xc00107c400), Addresses: []*git02.smartosc.com/production/go-shopify.CustomerAddress len: 0, cap: 0, nil, CreatedAt: *(*time.Time)(0xc0014e42b8), UpdatedAt: *(*time.Time)(0xc0014e42d0), Metafields: []git02.smartosc.com/production/go-shopify.Metafield len: 0, cap: 0, nil}, BillingAddress: *git02.smartosc.com/production/go-shopify.Address {ID: 0, Address1: "ad", Address2: "", City: "wer", Company: "", Country: "Afghanistan", CountryCode: "AF", FirstName: "Guest", LastName: "Customer", Latitude: 33.93911, Longitude: 67.709953, Name: "Guest Customer", Phone: "53443344343", Province: "", ProvinceCode: "", Zip: "43344", Email: "", LocaltionID: ""}, ShippingAddress: *git02.smartosc.com/production/go-shopify.Address {ID: 0, Address1: "ad", Address2: "", City: "wer", Company: "", Country: "Afghanistan", CountryCode: "AF", FirstName: "Guest", LastName: "Customer", Latitude: 33.93911, Longitude: 67.709953, Name: "Guest Customer", Phone: "53443344343", Province: "", ProvinceCode: "", Zip: "43344", Email: "", LocaltionID: ""}, Currency: "THB", PresentmentCurrency: "AFN", TotalPrice: *github.com/shopspring/decimal.Decimal {value: *(*"math/big.Int")(0xc00199a4a0), exp: -2}, TotalPriceSet: *git02.smartosc.com/production/go-shopify.PriceSet {ShopMoney: (*"git02.smartosc.com/production/go-shopify.PriceSetMoney")(0xc001a193e0), PresentmentMoney: (*"git02.smartosc.com/production/go-shopify.PriceSetMoney")(0xc001a193f8)}, TotalShippingPriceSet: *git02.smartosc.com/production/go-shopify.PriceSet {ShopMoney: (*"git02.smartosc.com/production/go-shopify.PriceSetMoney")(0xc001a19410), PresentmentMoney: (*"git02.smartosc.com/production/go-shopify.PriceSetMoney")(0xc001a19428)}, SubtotalPrice: *github.com/shopspring/decimal.Decimal {value: *(*"math/big.Int")(0xc00199a440), exp: -2}, TotalDiscounts: *github.com/shopspring/decimal.Decimal {value: *(*"math/big.Int")(0xc00199a460), exp: -2}, TotalLineItemsPrice: *github.com/shopspring/decimal.Decimal {value: *(*"math/big.Int")(0xc00199a480), exp: -2}, TaxesIncluded: false, TotalTax: *github.com/shopspring/decimal.Decimal {value: *(*"math/big.Int")(0xc00199a540), exp: -2}, TaxLines: []git02.smartosc.com/production/go-shopify.TaxLine len: 0, cap: 0, [], TotalWeight: 0, FinancialStatus: "paid", Fulfillments: []git02.smartosc.com/production/go-shopify.Fulfillment len: 1, cap: 1, [(*"git02.smartosc.com/production/go-shopify.Fulfillment")(0xc00053e840)], FulfillmentStatus: "fulfilled", Token: "b171538334dbadb848e7b5f4c3394640", CartToken: "", Number: 2240, OrderNumber: 3240, Note: "", Test: false, BrowserIp: "13.48.76.80", BuyerAcceptsMarketing: false, CancelReason: "", NoteAttributes: []git02.smartosc.com/production/go-shopify.NoteAttribute len: 4, cap: 4, [(*"git02.smartosc.com/production/go-shopify.NoteAttribute")(0xc001096c00),(*"git02.smartosc.com/production/go-shopify.NoteAttribute")(0xc001096c20),(*"git02.smartosc.com/production/go-shopify.NoteAttribute")(0xc001096c40),(*"git02.smartosc.com/production/go-shopify.NoteAttribute")(0xc001096c60)], DiscountCodes: []git02.smartosc.com/production/go-shopify.DiscountCode len: 0, cap: 0, [], LineItems: []git02.smartosc.com/production/go-shopify.LineItem len: 1, cap: 1, [(*"git02.smartosc.com/production/go-shopify.LineItem")(0xc000915560)], ShippingLines: []git02.smartosc.com/production/go-shopify.ShippingLines len: 0, cap: 0, [], Transactions: []git02.smartosc.com/production/go-shopify.Transaction len: 1, cap: 1, [(*"git02.smartosc.com/production/go-shopify.Transaction")(0xc000f54000)], AppID: 220307849217, CustomerLocale: "en", LandingSite: "", ReferringSite: "", SourceName: "220307849217", ClientDetails: *git02.smartosc.com/production/go-shopify.ClientDetails {AcceptLanguage: "", BrowserHeight: 0, BrowserIp: "13.48.76.80", BrowserWidth: 0, SessionHash: "", UserAgent: "Go-http-client/2.0"}, Tags: "cashier:cashier, ConnectPOS, eid:58576409-f7ce-4504-b86b-cb237d709b81, in_store", LocationId: 0, PaymentGatewayNames: []string len: 1, cap: 1, ["manual"], Refunds: []git02.smartosc.com/production/go-shopify.Refund len: 0, cap: 0, [], UserId: 0, OrderStatusUrl: "https://fashion-test-vietnam.myshopify.com/57510887576/orders/b171538334dbadb848e7b5f4c3394640/authenticate?key=4c3191071e880c32aee5a61037d3d83f", Confirmed: true, CheckoutToken: "377593efc44a1175e734df1e53ca450e", Reference: "", SourceIdentifier: "", SourceURL: "", DeviceID: 0, Phone: "", LandingSiteRef: "", CheckoutID: 32091763474584, ContactEmail: "guest@connectpos.com", Metafields: []git02.smartosc.com/production/go-shopify.Metafield len: 0, cap: 0, nil, DiscountApplications: []git02.smartosc.com/production/go-shopify.DiscountApplication len: 1, cap: 1, [(*"git02.smartosc.com/production/go-shopify.DiscountApplication")(0xc0016243c0)], InventoryBehaviour: "", SendReceipt: false}




// data builder
func buildOrderToCreate(o *cpb.Order, guestCustomerId int64, storeId uint64, outletName string) spf.Order {
	data := spf.Order{
		Note:               o.GetNote(),
		SourceName:         o.GetSource(),
		FinancialStatus:    buildOrderFinancialStatus(o),
		LocationId:         util.StringToInt64(o.GetLocationId()),
		Tags:               buildOrderTagsToCreate(o),
		LineItems:          buildOrderItemsToCreate(o.GetItems(), storeId),
		NoteAttributes:     buildOrderNoteAttributes(o),
		TaxesIncluded:      o.GetTaxesIncluded(),
		InventoryBehaviour: inventoryPolicyDecrementIgnoring,
		TotalDiscounts:     getOrderDiscountAmount(o),
		Currency:           o.GetCurrency(),
		Customer: &spf.CustomerOrder{
			FirstName: o.GetCustomer().GetFirstName(),
			LastName:  o.GetCustomer().GetLastName(),
		},
	}

	if outletName != "" {
		data.NoteAttributes = append(data.NoteAttributes, spf.NoteAttribute{
			Name:  OutletName,
			Value: outletName,
		})
	}
